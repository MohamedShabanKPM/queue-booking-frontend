<div class="tab-content">
  <div class="tab-header">
    <h2>{{ 'dashboard.statistics' | translate }}</h2>
    <div class="filters">
      <div class="filter-group">
        <label>{{ 'filter.date' | translate }}:</label>
        <div class="date-input-group">
          <select [(ngModel)]="selectedDay" (change)="onDateChange()" class="form-control date-select">
            <option [value]="null">{{ 'common.day' | translate }}</option>
            <option *ngFor="let day of days" [value]="day">{{ day }}</option>
          </select>
          <select [(ngModel)]="selectedMonth" (change)="onDateChange()" class="form-control date-select">
            <option [value]="null">{{ 'common.month' | translate }}</option>
            <option *ngFor="let month of months; let i = index" [value]="i + 1">{{ month }}</option>
          </select>
          <select [(ngModel)]="selectedYear" (change)="onDateChange()" class="form-control date-select">
            <option [value]="null">{{ 'common.year' | translate }}</option>
            <option *ngFor="let year of years" [value]="year">{{ year }}</option>
          </select>
        </div>
        <button class="btn btn-secondary btn-today" (click)="setToday()" style="margin-top: 5px;">
          <i class="fas fa-calendar-day"></i> {{ 'common.today' | translate }}
        </button>
      </div>
      <div class="filter-group">
        <button class="btn btn-primary" (click)="exportToPDF()">
          <i class="fas fa-file-pdf"></i> {{ 'dashboard.exportPDF' | translate }}
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <div class="loading"></div>
  </div>

  <div *ngIf="stats && !loading">
    <div class="stats-grid">
      <div class="stat-card">
        <h3>{{ stats.totalToday }}</h3>
        <p>{{ 'dashboard.totalBookings' | translate }}</p>
      </div>
      <div class="stat-card">
        <h3>{{ stats.waiting }}</h3>
        <p>{{ 'dashboard.waiting' | translate }}</p>
      </div>
      <div class="stat-card">
        <h3>{{ stats.inProgress }}</h3>
        <p>{{ 'dashboard.inProgress' | translate }}</p>
      </div>
      <div class="stat-card">
        <h3>{{ stats.completed }}</h3>
        <p>{{ 'dashboard.completed' | translate }}</p>
      </div>
      <div class="stat-card">
        <h3>{{ stats.cancelled }}</h3>
        <p>{{ 'dashboard.cancelled' | translate }}</p>
      </div>
    </div>


    <div *ngIf="stats.employeeStats.length > 0" class="employee-stats-section">
      <h3>{{ 'dashboard.employeeStatistics' | translate }}</h3>
      <table class="table">
        <thead>
          <tr>
            <th>{{ 'dashboard.employee' | translate }}</th>
            <th>{{ 'dashboard.total' | translate }}</th>
            <th>{{ 'dashboard.completed' | translate }}</th>
            <th>{{ 'dashboard.cancelled' | translate }}</th>
            <th>{{ 'dashboard.avgTime' | translate }}</th>
            <th>{{ 'dashboard.minTime' | translate }}</th>
            <th>{{ 'dashboard.maxTime' | translate }}</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let emp of stats.employeeStats">
            <td>{{ emp.name }}</td>
            <td>{{ emp.count }}</td>
            <td>{{ emp.completed }}</td>
            <td>{{ emp.cancelled }}</td>
            <td>{{ emp.averageTime }}</td>
            <td>{{ emp.minTime }}</td>
            <td>{{ emp.maxTime }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

